<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SSH Thing</title>
    <link rel="stylesheet" href="./vendor/tailwind.min.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/xterm@5.3.0/css/xterm.css" />
    <script src="https://cdn.jsdelivr.net/npm/xterm@5.3.0/lib/xterm.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xterm-addon-fit@0.8.0/lib/xterm-addon-fit.js"></script>
    <script type="module" src="./main.js"></script>
    <style>
      :root {
        --bg-primary: #eff1f5;
        --bg-secondary: #ffffff;
        --bg-tertiary: #e6e9ef;
        --surface-0: #ccd0da;
        --surface-1: #bcc0cc;
        --surface-2: #acb0be;
        --overlay-0: #9ca0b0;
        --overlay-1: #8c8fa1;
        --overlay-2: #7c7f93;
        --mantle: #e6e9ef;
        --crust: #dce0e8;
        --text-primary: #4c4f69;
        --text-secondary: #6c6f85;
        --border-color: #ccd0da;
        --terminal-bg: #0f111a;
        font-size: clamp(14px, 0.9vw + 11px, 16px);
      }

      .dark {
        --bg-primary: #1e1e2e;
        --bg-secondary: #181825;
        --bg-tertiary: #313244;
        --surface-0: #313244;
        --surface-1: #45475a;
        --surface-2: #585b70;
        --overlay-0: #6c7086;
        --overlay-1: #7f849c;
        --overlay-2: #9399b2;
        --mantle: #181825;
        --crust: #11111b;
        --text-primary: #cdd6f4;
        --text-secondary: #a6adc8;
        --border-color: #45475a;
        --terminal-bg: #0f111a;
      }

      #alert-icon.error { background-color: #fee2e2; color: #dc2626; }
      #alert-icon.warning { background-color: #fef3c7; color: #d97706; }
      #alert-icon.success { background-color: #dcfce7; color: #16a34a; }
      #alert-icon.info { background-color: #dbeafe; color: #2563eb; }

      html, body {
        min-width: 1200px;
      }

      .app-shell {
        font-family: "Space Grotesk", "Segoe UI", sans-serif;
        background: radial-gradient(circle at top left, rgba(114, 135, 253, 0.15), transparent 45%),
          radial-gradient(circle at bottom right, rgba(148, 226, 213, 0.2), transparent 45%),
          #eff1f5;
      }

      .dark .app-shell {
        background: radial-gradient(circle at top left, rgba(203, 166, 247, 0.18), transparent 45%),
          radial-gradient(circle at bottom right, rgba(137, 180, 250, 0.16), transparent 45%),
          #1e1e2e;
      }

      #app-container {
        max-width: 1320px;
        min-width: 1200px;
        margin: 0 auto;
        width: 100%;
      }

      .server-item, .snippet-item {
        transition: background-color 0.15s ease, border-color 0.15s ease, box-shadow 0.15s ease;
        animation: float-in 0.2s ease;
      }

      .server-item:hover, .snippet-item:hover {
        transform: none;
        box-shadow: 0 2px 8px -2px rgba(0, 0, 0, 0.1);
      }

      .server-item.status-connected {
        background: linear-gradient(135deg, rgba(64, 160, 43, 0.06), rgba(64, 160, 43, 0.02)) !important;
        border-color: rgba(64, 160, 43, 0.2) !important;
      }
      .server-item.status-connecting {
        background: linear-gradient(135deg, rgba(217, 119, 6, 0.06), rgba(217, 119, 6, 0.02)) !important;
        border-color: rgba(217, 119, 6, 0.2) !important;
      }
      .server-item.status-error {
        background: linear-gradient(135deg, rgba(210, 15, 57, 0.06), rgba(210, 15, 57, 0.02)) !important;
        border-color: rgba(210, 15, 57, 0.2) !important;
      }
      .server-item.status-active {
        background: linear-gradient(135deg, rgba(64, 160, 43, 0.1), rgba(64, 160, 43, 0.04)) !important;
        border-color: rgba(64, 160, 43, 0.35) !important;
        box-shadow: 0 0 0 1px rgba(64, 160, 43, 0.1) !important;
      }
      .dark .server-item.status-connected {
        background: linear-gradient(135deg, rgba(64, 160, 43, 0.08), rgba(64, 160, 43, 0.03)) !important;
        border-color: rgba(64, 160, 43, 0.25) !important;
      }
      .dark .server-item.status-connecting {
        background: linear-gradient(135deg, rgba(217, 119, 6, 0.08), rgba(217, 119, 6, 0.03)) !important;
        border-color: rgba(217, 119, 6, 0.25) !important;
      }
      .dark .server-item.status-error {
        background: linear-gradient(135deg, rgba(210, 15, 57, 0.08), rgba(210, 15, 57, 0.03)) !important;
        border-color: rgba(210, 15, 57, 0.25) !important;
      }
      .dark .server-item.status-active {
        background: linear-gradient(135deg, rgba(64, 160, 43, 0.12), rgba(64, 160, 43, 0.05)) !important;
        border-color: rgba(64, 160, 43, 0.4) !important;
        box-shadow: 0 0 0 1px rgba(64, 160, 43, 0.15) !important;
      }

      .server-section-label {
        font-size: 0.625rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        color: var(--text-secondary);
        padding: 0.5rem 0.25rem 0.25rem;
        margin-top: 0.25rem;
      }

      .server-section-label:first-child {
        margin-top: 0;
      }

      .sleek-pill {
        border: none;
        backdrop-filter: blur(6px);
      }

      .header-glass {
        background: rgba(255, 255, 255, 0.78);
        border: 1px solid rgba(204, 208, 218, 0.8);
        box-shadow: 0 10px 30px rgba(15, 23, 42, 0.08);
      }

      .dark .header-glass {
        background: rgba(30, 30, 46, 0.65);
        border-color: rgba(69, 71, 90, 0.55);
      }

      .sidebar-surface {
        background: linear-gradient(180deg, var(--bg-secondary), var(--bg-tertiary));
      }

      .dark .sidebar-surface {
        background: linear-gradient(180deg, var(--mantle), var(--bg-primary));
      }

      #sidebar {
        border-color: var(--border-color) !important;
      }

      #main-content {
        background: var(--bg-primary) !important;
      }

      .panel-surface {
        background: var(--bg-secondary);
        border-color: var(--border-color);
      }

      .dark .panel-surface {
        background: var(--surface-0);
        border-color: var(--surface-1);
      }

      .dark .server-item,
      .dark .snippet-item {
        background: var(--surface-0) !important;
        border-color: var(--surface-1) !important;
      }

      .dark #header h1 {
        color: var(--text-primary);
      }

      .dark #connection-status {
        background: var(--surface-1) !important;
        color: var(--text-primary) !important;
      }

      .terminal-shell {
        box-shadow: 0 20px 60px rgba(15, 23, 42, 0.3);
        border: 1px solid rgba(148, 163, 184, 0.4);
      }

      .dark .terminal-shell {
        border-color: rgba(69, 71, 90, 0.8);
      }

      .terminal-surface {
        background: var(--terminal-bg);
      }

      .terminal-transparent .terminal-surface,
      .terminal-transparent #terminal-container {
        background: transparent !important;
      }

      #terminal-container {
        padding: 2px 14px; /* slightly more side inset */
        box-sizing: border-box;
        background: var(--terminal-bg);
        border-radius: 16px;
        box-shadow:
          inset 0 16px 40px rgba(0, 0, 0, 0.36),
          inset 0 -16px 44px rgba(0, 0, 0, 0.32),
          0 24px 64px rgba(0, 0, 0, 0.32);
        border: 1px solid rgba(148, 163, 184, 0.38);
        display: flex;
        flex-direction: column;
        flex: 1 1 auto;
        min-height: 0;
      }

      .terminal-pane {
        flex: 1 1 auto;
        width: 100%;
        height: 100%;
        min-height: 0;
      }

      /* Let the parent provide the background color so theme matches Catppuccin */
      .xterm,
      .xterm-viewport {
        background-color: transparent !important;
      }

      .focus-toggle {
        background: linear-gradient(135deg, #7287fd, #1e66f5);
      }

      .dark .focus-toggle {
        background: linear-gradient(135deg, #b4befe, #7f849c);
      }

      @keyframes float-in {
        0% { opacity: 0; transform: translateY(6px); }
        100% { opacity: 1; transform: translateY(0); }
      }
      
      /* Scrollbar styling for webkit */
      ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }
      ::-webkit-scrollbar-track {
        background: transparent;
      }
      ::-webkit-scrollbar-thumb {
        background: #d1d5db;
        border-radius: 4px;
      }
      .dark ::-webkit-scrollbar-thumb {
        background: #4b5563;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #9ca3af;
      }
      .dark ::-webkit-scrollbar-thumb:hover {
        background: #6b7280;
      }

      .tab-btn {
        padding: 0.6rem 1rem;
        font-weight: 500;
        font-size: 0.8125rem;
        transition: all 0.15s ease;
        border-radius: 0.375rem;
        margin: 0.375rem;
      }

      .tab-btn.active {
        background: var(--bg-tertiary);
        color: var(--text-primary);
        border-bottom: none;
      }

      .tab-btn.inactive {
        background: transparent;
        color: var(--text-secondary);
      }

      .tab-btn.inactive:hover {
        background: rgba(114, 135, 253, 0.08);
        color: var(--text-primary);
      }

      .focus-mode-active #sidebar,
      .focus-mode-active #header,
      .focus-mode-active #status-bar,
      .focus-mode-active #connection-log-container {
        display: none !important;
      }
      
      .focus-mode-active #main-content {
        padding: 0;
      }
      
      .focus-mode-active #terminal-wrapper {
        height: 100vh;
        border-radius: 0;
      }

      .focus-mode-active #terminal-container {
        height: 100% !important;
        border-radius: 0;
        padding: 0 2px;
        box-shadow: none;
        border: none;
      }

      #exit-focus-btn {
        display: none;
      }

      .focus-mode-active #exit-focus-btn {
        display: flex;
      }
      
      .focus-mode-active #focus-btn {
        display: none;
      }

      /* Custom utilities for local Tailwind build */
      .w-80 { width: 20rem; }
      .w-full { width: 100%; }
      .h-full { height: 100%; }
      .min-w-0 { min-width: 0; }
      .min-h-0 { min-height: 0; }
      .flex-shrink-0 { flex-shrink: 0; }
      .flex-col { flex-direction: column; }
      .relative { position: relative; }
      .absolute { position: absolute; }
      .top-2 { top: 0.5rem; }
      .right-2 { right: 0.5rem; }
      .z-10 { z-index: 10; }
      .z-40 { z-index: 40; }
      .z-50 { z-index: 50; }
      .overflow-hidden { overflow: hidden; }
      .overflow-y-auto { overflow-y: auto; }
      .border-b { border-bottom-width: 1px; }
      .border-b-2 { border-bottom-width: 2px; }
      .border-blue-500 { border-color: #3b82f6; }
      .border-gray-700 { border-color: #374151; }
      .border-gray-600 { border-color: #4b5563; }
      .rounded-md { border-radius: 0.375rem; }
      .rounded-lg { border-radius: 0.5rem; }
      .shadow-sm { box-shadow: 0 1px 2px 0 rgba(0,0,0,0.05); }
      .shadow-md { box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06); }
      .transition-all { transition: all 0.2s ease; }
      .duration-300 { transition-duration: 300ms; }
      .opacity-0 { opacity: 0; }
      .opacity-50 { opacity: 0.5; }
      .hover\:opacity-100:hover { opacity: 1; }
      .group:hover .group-hover\:opacity-100 { opacity: 1; }
      .gap-1\.5 { gap: 0.375rem; }
      .p-1\.5 { padding: 0.375rem; }
      .px-2\.5 { padding-left: 0.625rem; padding-right: 0.625rem; }
      .py-0\.5 { padding-top: 0.125rem; padding-bottom: 0.125rem; }
      .text-xs { font-size: 0.75rem; line-height: 1rem; }
      .text-sm { font-size: 0.875rem; line-height: 1.25rem; }
      .text-\[10px\] { font-size: 10px; line-height: 1rem; }
      .tracking-tight { letter-spacing: -0.015em; }
      .tracking-wide { letter-spacing: 0.05em; }
      .uppercase { text-transform: uppercase; }
      .font-semibold { font-weight: 600; }
      .mt-3 { margin-top: 0.75rem; }
      .bg-gray-50 { background-color: #f9fafb; }
      .bg-gray-800\/80 { background-color: rgba(30, 30, 46, 0.75); }
      .bg-gray-800\/90 { background-color: rgba(30, 30, 46, 0.85); }
      .bg-blue-50 { background-color: rgba(114, 135, 253, 0.12); }
      .bg-red-50 { background-color: rgba(210, 15, 57, 0.12); }
      .bg-blue-500 { background-color: #7287fd; }
      .bg-blue-600 { background-color: #1e66f5; }
      .bg-green-500 { background-color: #40a02b; }
      .bg-green-600 { background-color: #2d8a1f; }
      .bg-red-500 { background-color: #d20f39; }
      .bg-red-600 { background-color: #b21535; }
      .text-blue-400 { color: #7287fd; }
      .text-blue-600 { color: #1e66f5; }
      .text-gray-700 { color: #374151; }
      .text-gray-800 { color: #1f2937; }
      .text-gray-900 { color: #111827; }
      .dark .dark\:text-blue-400 { color: #89b4fa; }
      .dark .dark\:text-gray-200 { color: #cdd6f4; }
      .dark .dark\:text-gray-400 { color: #a6adc8; }
      .dark .dark\:text-gray-500 { color: #7f849c; }
      .dark .dark\:bg-gray-700\/50 { background-color: rgba(69, 71, 90, 0.55); }
      .dark .dark\:bg-gray-800\/50 { background-color: rgba(49, 50, 68, 0.6); }
      .dark .dark\:bg-gray-900\/20 { background-color: rgba(30, 30, 46, 0.35); }
      .hover\:bg-blue-50:hover { background-color: #eff6ff; }
      .hover\:bg-red-50:hover { background-color: #fef2f2; }
      .dark .dark\:hover\:bg-blue-900\/20:hover { background-color: rgba(137, 180, 250, 0.2); }
      .dark .dark\:hover\:bg-red-900\/20:hover { background-color: rgba(243, 139, 168, 0.2); }

      .modal-panel {
        background: var(--bg-secondary);
        border: 1px solid var(--border-color);
        border-radius: 0.75rem;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
      }

      .modal-section {
        padding: 1rem;
        border-bottom: 1px solid var(--border-color);
      }

      .modal-section:last-child {
        border-bottom: none;
      }

      .modal-section-title {
        font-size: 0.6875rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        color: var(--text-secondary);
        margin-bottom: 0.75rem;
      }

      .form-input {
        width: 100%;
        border-radius: 0.375rem;
        border: 1px solid var(--border-color);
        padding: 0.5rem 0.625rem;
        background: var(--bg-primary);
        color: var(--text-primary);
        font-size: 0.875rem;
        transition: border-color 0.15s ease, box-shadow 0.15s ease;
      }

      .form-input:focus {
        outline: none;
        border-color: #7287fd;
        box-shadow: 0 0 0 2px rgba(114, 135, 253, 0.2);
      }

      .form-input::placeholder {
        color: var(--text-secondary);
        opacity: 0.6;
      }

      .form-label {
        display: block;
        font-size: 0.75rem;
        font-weight: 500;
        color: var(--text-secondary);
        margin-bottom: 0.375rem;
      }

      .form-select {
        width: 100%;
        border-radius: 0.375rem;
        border: 1px solid var(--border-color);
        padding: 0.5rem 0.625rem;
        background: var(--bg-primary);
        color: var(--text-primary);
        font-size: 0.875rem;
        cursor: pointer;
        transition: border-color 0.15s ease, box-shadow 0.15s ease;
      }

      .form-select:focus {
        outline: none;
        border-color: #7287fd;
        box-shadow: 0 0 0 2px rgba(114, 135, 253, 0.2);
      }

      .server-card-name {
        font-weight: 500;
        font-size: 0.8125rem;
        color: var(--text-primary);
        letter-spacing: -0.01em;
      }

      .server-card-subtitle {
        font-size: 0.6875rem;
        color: var(--text-secondary);
        margin-top: 0.125rem;
        letter-spacing: 0.01em;
      }

      .server-card-meta {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.6875rem;
        color: var(--text-secondary);
      }

      .server-card-badge {
        padding: 0.125rem 0.375rem;
        border-radius: 0.25rem;
        background: var(--surface-0);
        border: 1px solid var(--border-color);
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
        font-size: 0.625rem;
      }

      .snippet-item .server-card-subtitle {
        color: #7287fd;
      }
      .dark .snippet-item .server-card-subtitle {
        color: #b4befe;
      }

      .sidebar-header {
        background: rgba(255, 255, 255, 0.5);
      }
      .dark .sidebar-header {
        background: rgba(30, 30, 46, 0.5);
      }

      .snippet-tooltip {
        pointer-events: none;
        line-height: 1.5;
      }

      @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
      }

      .animate-pulse {
        animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
      }

      .hidden {
        display: none !important;
      }

      .modal-backdrop {
        background: rgba(17, 17, 27, 0.55);
        backdrop-filter: blur(6px);
      }

      .modal-content {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }

      /* Positioning utilities missing from Tailwind build */
      .fixed {
        position: fixed !important;
      }
      .absolute {
        position: absolute !important;
      }
      .relative {
        position: relative !important;
      }
      .inset-0 {
        top: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        left: 0 !important;
      }
      .top-0 {
        top: 0 !important;
      }
      .right-0 {
        right: 0 !important;
      }
      .bottom-0 {
        bottom: 0 !important;
      }
      .left-0 {
        left: 0 !important;
      }
      
      /* Missing Tailwind utilities for edit/delete buttons */
      .opacity-0 { opacity: 0 !important; }
      .opacity-100 { opacity: 1 !important; }
      .group:hover .group-hover\:opacity-100 { opacity: 1 !important; }
      .transition-opacity { transition-property: opacity; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 150ms; }

      /* Ensure server action buttons show on card hover */
      .server-actions {
        opacity: 0 !important;
        transition: opacity 0.15s ease-in-out;
        position: relative;
      }

      .server-item:hover .server-actions {
        opacity: 1 !important;
      }

      .server-action-btn {
        padding: 0.375rem;
        border-radius: 0.375rem;
        color: #9ca3af;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        transition: color 0.15s ease, background-color 0.15s ease;
      }

      .server-action-btn:hover {
        color: #3b82f6;
        background: rgba(239, 246, 255, 1);
      }

      .server-action-btn.delete:hover {
        color: #ef4444;
        background: rgba(254, 242, 242, 1);
      }

      .dark .server-action-btn:hover {
        color: #89b4fa;
        background: rgba(137, 180, 250, 0.2);
      }

      .dark .server-action-btn.delete:hover {
        color: #f38ba8;
        background: rgba(243, 139, 168, 0.2);
      }

      .server-action-icon {
        width: 14px;
        height: 14px;
      }

      .ghost-btn {
        background: transparent;
        border: none;
        color: var(--text-secondary);
        padding: 0.375rem 0.625rem;
        border-radius: 0.375rem;
        font-size: 0.75rem;
        font-weight: 500;
        transition: all 0.15s ease;
        display: inline-flex;
        align-items: center;
        gap: 0.375rem;
      }

      .ghost-btn:hover {
        background: var(--bg-tertiary);
        color: var(--text-primary);
      }

      .ghost-btn-primary {
        color: #7287fd;
      }

      .ghost-btn-primary:hover {
        background: rgba(114, 135, 253, 0.12);
        color: #7287fd;
      }

      .ghost-btn-success {
        color: #40a02b;
      }

      .ghost-btn-success:hover {
        background: rgba(64, 160, 43, 0.12);
        color: #40a02b;
      }

      .ghost-btn-danger {
        color: #d20f39;
      }

      .ghost-btn-danger:hover {
        background: rgba(210, 15, 57, 0.12);
        color: #d20f39;
      }

      .dark .ghost-btn:hover {
        background: var(--surface-1);
      }

      .dark .ghost-btn-primary {
        color: #b4befe;
      }

      .dark .ghost-btn-primary:hover {
        background: rgba(114, 135, 253, 0.15);
        color: #b4befe;
      }

      .dark .ghost-btn-success {
        color: #a6e3a1;
      }

      .dark .ghost-btn-success:hover {
        background: rgba(64, 160, 43, 0.15);
        color: #a6e3a1;
      }

      .dark .ghost-btn-danger {
        color: #f38ba8;
      }

      .dark .ghost-btn-danger:hover {
        background: rgba(210, 15, 57, 0.15);
        color: #f38ba8;
      }

      /* Additional hover utilities that might be missing */
      .hover\:text-blue-500:hover { color: rgb(59 130 246) !important; }
      .hover\:text-red-500:hover { color: rgb(239 68 68) !important; }
      .hover\:bg-blue-50:hover { background-color: rgb(239 246 255) !important; }
      .hover\:bg-red-50:hover { background-color: rgb(254 242 242) !important; }
      .dark .dark\:hover\:bg-blue-900\/20:hover { background-color: rgba(59 130 246 / 0.2) !important; }
      .dark .dark\:hover\:bg-red-900\/20:hover { background-color: rgba(239 68 68 / 0.2) !important; }
    </style>
  </head>

  <body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 overflow-hidden app-shell">
    <div id="app-container" class="flex h-screen w-full">
      
      <!-- Sidebar -->
      <aside id="sidebar" class="w-80 flex-shrink-0 sidebar-surface border-r border-gray-200 dark:border-gray-700 flex flex-col transition-all duration-300">
        <!-- Sidebar Header / Tabs -->
        <div class="flex border-b border-gray-200 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/30">
          <button id="tab-servers" class="tab-btn flex-1 text-sm font-medium">
            Servers
          </button>
          <button id="tab-snippets" class="tab-btn flex-1 text-sm font-medium">
            Snippets
          </button>
        </div>

        <!-- Tab Content: Servers -->
        <div id="view-servers" class="flex-1 flex flex-col min-h-0">
          <div class="px-4 py-3 flex justify-between items-center border-b border-gray-200/60 dark:border-gray-700/50">
            <span class="text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide">Hosts</span>
            <button id="add-server-btn" class="ghost-btn ghost-btn-primary">
              <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/></svg>
              Add
            </button>
          </div>
          <div id="server-filter-wrap" class="px-4 py-2 hidden">
            <input id="server-filter" type="text" placeholder="Filter hosts..." autocorrect="off" autocapitalize="off" spellcheck="false" class="form-input text-sm" />
          </div>
          <div class="flex-1 overflow-y-auto px-3 py-2 space-y-2" id="server-list">
            <!-- Server items will be injected here -->
          </div>
        </div>

        <!-- Tab Content: Snippets -->
        <div id="view-snippets" class="flex-1 flex flex-col min-h-0 hidden">
          <div class="px-4 py-3 flex justify-between items-center border-b border-gray-200/60 dark:border-gray-700/50">
            <span class="text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide">Snippets</span>
            <button id="add-snippet-btn" class="ghost-btn ghost-btn-success">
              <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/></svg>
              Add
            </button>
          </div>
          <div class="flex-1 overflow-y-auto px-3 py-2 space-y-2" id="snippet-list">
            <!-- Snippet items will be injected here -->
          </div>
        </div>
      </aside>

      <!-- Main Content -->
      <main id="main-content" class="flex-1 flex flex-col h-full min-w-0 bg-gray-100 dark:bg-gray-900 p-4 transition-all duration-300">
        
        <!-- Header -->
        <header id="header" class="flex justify-between items-center mb-4 flex-shrink-0 header-glass rounded-lg px-4 py-3">
          <div class="flex items-center gap-3">
            <h1 class="text-xl font-bold text-gray-800 dark:text-white tracking-tight">SSH Thing</h1>
            <div id="connection-status" class="px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-400">
              Disconnected
            </div>
          </div>
          
          <div class="flex items-center gap-3">
             <button id="disconnect-btn" class="hidden flex items-center gap-1.5 bg-red-500 hover:bg-red-600 text-white px-3 py-1.5 rounded text-sm transition-colors shadow-sm">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
                <span>Disconnect</span>
            </button>
            <button id="focus-toggle-btn" class="focus-toggle sleek-pill flex items-center gap-1.5 text-white px-3 py-1.5 rounded text-xs font-semibold uppercase tracking-wide shadow-sm border-none" title="Toggle focus mode">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"/></svg>
              <span>Focus</span>
            </button>
            <button id="terminal-bg-toggle" class="sleek-pill flex items-center gap-1.5 text-gray-700 dark:text-gray-200 px-3 py-1.5 rounded text-xs font-semibold uppercase tracking-wide shadow-sm border-none" title="Toggle terminal background">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h2a1 1 0 011 1v16a1 1 0 01-1 1H4a1 1 0 01-1-1V4zm14 0h2a1 1 0 011 1v16a1 1 0 01-1 1h-2a1 1 0 01-1-1V4a1 1 0 011-1zM7 12h10"/></svg>
              <span id="terminal-bg-label">Solid</span>
            </button>
            <button id="theme-toggle" class="p-2 rounded-md bg-white dark:bg-gray-800 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors shadow-sm border-none" title="Toggle theme">
              <svg id="sun-icon" class="w-5 h-5 hidden dark:block" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
              </svg>
              <svg id="moon-icon" class="w-5 h-5 block dark:hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
              </svg>
            </button>
          </div>
        </header>

        <!-- Terminal Area -->
        <div id="terminal-wrapper" class="terminal-shell terminal-surface flex-1 rounded-lg overflow-hidden relative flex flex-col min-h-0">
            <!-- Session Tabs -->
            <div id="session-tabs" class="hidden border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 px-2 py-1 flex items-center gap-1 overflow-x-auto">
                <!-- Session tabs will be injected here -->
            </div>
            
            <div class="absolute top-2 right-2 z-10 flex gap-2">
                <button id="focus-btn" class="p-1.5 bg-gray-800/80 hover:bg-gray-700 text-white rounded opacity-50 hover:opacity-100 transition-all" title="Focus Mode">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"/></svg>
                </button>
                <button id="exit-focus-btn" class="p-2 bg-gray-800/90 hover:bg-gray-700 text-white rounded shadow-md transition-all" title="Exit Focus Mode">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4M4 16v-4m0 0h4m-4 0l5 5m11-5l-5 5m5-5v4m0-4h-4"/></svg>
                </button>
            </div>
            <div id="terminal-container" class="w-full h-full"></div>
        </div>
        
        <!-- Status Bar -->
        <div id="status-bar" class="mt-3 flex justify-between items-center px-4 py-2 bg-white dark:bg-gray-800 rounded-lg text-sm border border-gray-200 dark:border-gray-700 shadow-sm flex-shrink-0">
          <div class="flex items-center gap-3">
            <div class="flex items-center gap-2">
              <div class="w-2 h-2 rounded-full bg-gray-400" id="status-indicator"></div>
              <div id="status-bar-host" class="text-gray-600 dark:text-gray-400 font-mono text-xs">Not connected</div>
            </div>
            <div id="session-count" class="text-[11px] text-gray-500 dark:text-gray-400">Sessions: 0</div>
          </div>
          <div id="status-bar-state" class="font-medium text-xs uppercase tracking-wide text-gray-500">Idle</div>
        </div>

        <!-- Connection Log -->
        <div id="connection-log-container" class="mt-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-3 shadow-sm flex-shrink-0 max-h-32 flex flex-col">
          <div class="flex items-center justify-between mb-2 flex-shrink-0">
            <h3 class="text-xs font-semibold uppercase tracking-wide text-gray-500">Connection Log</h3>
            <button id="clear-log-btn" class="text-xs text-blue-500 hover:text-blue-600">Clear</button>
          </div>
          <ul id="connection-log-list" class="overflow-y-auto flex-1 space-y-1 text-xs font-mono"></ul>
        </div>

      </main>
    </div>

    <div id="alert-modal" class="hidden fixed inset-0 modal-backdrop z-50">
      <div class="modal-content bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg w-96 max-w-sm mx-4">
        <div class="flex items-center gap-3 mb-4">
          <div id="alert-icon" class="flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center">
            <svg id="alert-icon-svg" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
            </svg>
          </div>
          <div>
            <h3 id="alert-title" class="text-lg font-bold">Error</h3>
            <p id="alert-message" class="text-sm text-gray-600 dark:text-gray-400">An error occurred</p>
          </div>
        </div>
        <div class="flex justify-end">
          <button id="alert-ok-btn" class="px-4 py-2 rounded bg-gray-500 hover:bg-gray-600 text-white text-sm">OK</button>
        </div>
      </div>
    </div>

    <div id="delete-confirm-modal" class="hidden fixed inset-0 modal-backdrop z-50">
      <div class="modal-content bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg w-96 max-w-sm mx-4">
        <div class="flex items-center gap-3 mb-4">
          <div class="flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center bg-red-50 text-red-600">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </div>
          <div>
            <h3 class="text-lg font-bold">Delete host?</h3>
            <p id="delete-confirm-message" class="text-sm text-gray-600 dark:text-gray-400">This action cannot be undone.</p>
          </div>
        </div>
        <div class="flex justify-end gap-2">
          <button id="delete-cancel-btn" class="px-4 py-2 rounded border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700">Cancel</button>
          <button id="delete-confirm-btn" class="px-4 py-2 rounded bg-red-500 hover:bg-red-600 text-white">Delete</button>
        </div>
      </div>
    </div>

    <div id="disconnect-confirm-modal" class="hidden fixed inset-0 modal-backdrop z-50">
      <div class="modal-content bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg w-96 max-w-sm mx-4">
        <div class="flex items-center gap-3 mb-4">
          <div class="flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center bg-rose-50 text-rose-600">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </div>
          <div>
            <h3 class="text-lg font-bold">Disconnect?</h3>
            <p id="disconnect-confirm-message" class="text-sm text-gray-600 dark:text-gray-400">Are you sure you want to disconnect?</p>
          </div>
        </div>
        <div class="flex justify-end gap-2">
          <button id="disconnect-cancel-btn" class="px-4 py-2 rounded border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700">Cancel</button>
          <button id="disconnect-confirm-btn" class="px-4 py-2 rounded bg-rose-600 hover:bg-rose-700 text-white">Disconnect</button>
        </div>
      </div>
    </div>

    <div id="host-key-modal" class="hidden fixed inset-0 modal-backdrop z-50">
      <div class="modal-content bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg w-[28rem] max-w-full mx-4">
        <div class="flex items-start justify-between mb-4">
          <div>
            <h3 class="text-xl font-bold">Trust this host key?</h3>
            <p class="text-sm text-gray-600 dark:text-gray-400">Verify the fingerprint before connecting.</p>
          </div>
        </div>
        <div class="space-y-3 text-sm">
          <div>
            <div class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Host</div>
            <div id="host-key-host" class="font-medium"></div>
          </div>
          <div class="grid grid-cols-2 gap-3">
            <div>
              <div class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Key Type</div>
              <div id="host-key-type" class="font-medium"></div>
            </div>
            <div>
              <div class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Fingerprint</div>
              <div id="host-key-fingerprint" class="font-mono text-xs break-all"></div>
            </div>
          </div>
        </div>
        <div class="flex justify-end gap-2 mt-6">
          <button type="button" id="host-key-reject" class="px-4 py-2 rounded border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700">Reject</button>
          <button type="button" id="host-key-trust" class="px-4 py-2 rounded bg-green-600 hover:bg-green-700 text-white">Trust</button>
        </div>
      </div>
    </div>

    <div id="server-modal" class="hidden fixed inset-0 modal-backdrop" style="z-index: 9999;">
      <div class="modal-content modal-panel w-[30rem] max-w-full mx-4 overflow-hidden">
        <div class="px-5 py-4 border-b border-gray-200 dark:border-gray-700">
          <h3 id="modal-title" class="text-lg font-semibold text-gray-800 dark:text-gray-100">Add Server</h3>
        </div>
        <form id="server-form">
          <input type="hidden" id="server-id" />
          
          <div class="modal-section">
            <div class="modal-section-title">Server Info</div>
            <div class="space-y-3">
              <div>
                <label class="form-label">Nickname</label>
                <input type="text" id="server-nickname" autocorrect="off" autocapitalize="off" spellcheck="false" class="form-input" placeholder="My Server" />
              </div>
              <div>
                <label class="form-label">Host <span class="text-red-400">*</span></label>
                <input type="text" id="server-host" required autocorrect="off" autocapitalize="off" spellcheck="false" class="form-input" placeholder="hostname or IP address" />
              </div>
            </div>
          </div>

          <div class="modal-section">
            <div class="modal-section-title">Connection</div>
            <div class="grid grid-cols-2 gap-3">
              <div>
                <label class="form-label">Port</label>
                <input type="number" id="server-port" value="22" required class="form-input" />
              </div>
              <div>
                <label class="form-label">Username <span class="text-red-400">*</span></label>
                <input type="text" id="server-user" required autocorrect="off" autocapitalize="off" spellcheck="false" class="form-input" placeholder="root" />
              </div>
            </div>
          </div>

          <div class="modal-section">
            <div class="modal-section-title">Authentication</div>
            <div class="space-y-3">
              <div>
                <label class="form-label">Auth Type</label>
                <select id="auth-type" class="form-select">
                  <option value="password">Password</option>
                  <option value="key">Private Key</option>
                </select>
              </div>
              <div id="password-field">
                <label class="form-label">Password</label>
                <input type="password" id="server-password" autocorrect="off" autocapitalize="off" spellcheck="false" class="form-input" placeholder="Enter password" />
              </div>
              <div id="key-field" class="hidden">
                <label class="form-label">Private Key</label>
                <textarea id="server-key" rows="4" autocorrect="off" autocapitalize="off" spellcheck="false" class="form-input font-mono text-xs" placeholder="Paste your private key here..."></textarea>
              </div>
            </div>
          </div>

          <div class="px-5 py-4 flex justify-end gap-2">
            <button type="button" id="cancel-btn" class="ghost-btn">Cancel</button>
            <button type="submit" class="ghost-btn ghost-btn-primary" style="background: rgba(114, 135, 253, 0.1);">Save Server</button>
          </div>
        </form>
      </div>
    </div>

    <div id="snippet-modal" class="hidden fixed inset-0 modal-backdrop">
      <div class="modal-content modal-panel w-[30rem] max-w-full mx-4 overflow-hidden">
        <div class="px-5 py-4 border-b border-gray-200 dark:border-gray-700">
          <h3 id="snippet-modal-title" class="text-lg font-semibold text-gray-800 dark:text-gray-100">Add Snippet</h3>
        </div>
        <form id="snippet-form">
          <input type="hidden" id="snippet-id" />
          
          <div class="modal-section">
            <div class="space-y-3">
              <div>
                <label class="form-label">Name <span class="text-red-400">*</span></label>
                <input type="text" id="snippet-name" required autocorrect="off" autocapitalize="off" spellcheck="false" class="form-input" placeholder="My Command" />
              </div>
              <div>
                <label class="form-label">Command <span class="text-red-400">*</span></label>
                <textarea id="snippet-command" rows="3" required autocorrect="off" autocapitalize="off" spellcheck="false" class="form-input font-mono text-xs" placeholder="ls -la"></textarea>
              </div>
              <div>
                <label class="form-label">Description</label>
                <input type="text" id="snippet-description" autocorrect="off" autocapitalize="off" spellcheck="false" class="form-input" placeholder="What does this command do?" />
              </div>
            </div>
          </div>

          <div class="px-5 py-4 flex justify-end gap-2">
            <button type="button" id="snippet-cancel-btn" class="ghost-btn">Cancel</button>
            <button type="submit" class="ghost-btn ghost-btn-success" style="background: rgba(64, 160, 43, 0.1);">Save Snippet</button>
          </div>
        </form>
      </div>
    </div>
  </body>
</html>
